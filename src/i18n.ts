export type Lang = "en" | "zh";

const STORAGE_KEY = "app_language";

const defaultLang: Lang = "en";

const translations: Record<Lang, Record<string, string>> = {
  en: {
    membership: "Membership",
    background: "Background",
    theme: "Theme",
    language: "Language",
    logout: "Logout",
    english: "English",
    chinese: "Chinese (Traditional)",
    cancel: "Cancel",
    save_language: "Save Language",
    add_new_folder: "Add New Folder",
    folder_name: "Folder Name",
    submit: "Submit",
    edit_folder: "Edit Folder",
    update: "Update",
    delete: "Delete",
    no_contacts: "No contacts available",
    search_placeholder: "Search by Name and Company name",
    add_more_folders: "+ add more folders",
    update_profile: "Update your Profile",
    loading: "Loading...",
    copy_qr: "Copy QR code",
    scan_qr: "Scan my QR code",
    copy_details: "Copy my Details",
    company_update_title: "Update Company Profile",
    company_create_title: "Create Company Profile",
    placeholder_company_english: "English Name for Company",
    placeholder_company_chinese: "Chinese Name for Company",
    placeholder_designation: "Designation",
    please_upload:
      "Please upload\n640 width by 360 high Image\nor\nPremium Member Upload 1 Minute Video",
    browse: "Browse",
    updating: "Updating...",
    add_more: "Add More",
    no_description: "No description available",
    next_company: "Next Company",
    placeholder_display_order: "Set display order",
    update_chamber: "Update Chamber",
    enter_chamber_detail: "Enter your chamber detail",
    chamber_details: "Chamber details",
    placeholder_chamber_english: "English Name for Chamber",
    placeholder_chamber_chinese: "Chinese Name for Chamber",
    no_chamber_data: "No chamber data found.",
    add_chamber: "Add Chamber",
    website_for_chamber: "Website for Chamber",
    telegram_placeholder: "https://t.me/Telegram Id",
    upgrade_membership: "Upgrade your membership",
    your_membership: "Your Membership",
    renewed_by_partner:
      "Your membership was renewed by our partner you are associated with :",
    premium_membership: "Premium Membership",
    basic_membership: "Basic Membership",
    renew_membership: "Renew your membership",
    payment_history: "Payment History",
    donator_section: "Donator section",
    donator_dashboard: "Donator Section",
    dashboard: "Dashboard",
    buy_credits: "Buy Credits",
    create_employee: "Create Employee",
    my_employees: "My Employees",
    purchase_history: "Purchase History",
    employee_credits: "No. Of Employees",
    operator_credits: "No. Of Operators",
    operator_slots: "Operator Slots",
    available: "Available",
    credits_used: "Credits Used",
    total_employees: "Total Employees",
    no_packages_available: "No packages available",
    popular: "Popular",
    buy_now: "Buy Now",
    buy_package: "Buy Package",
    package_details: "Package Details",
    transaction_id_help: "Enter your off-chain USDT transaction ID",
    telegram_id: "Telegram ID",
    employee_name: "Employee Name",
    optional: "Optional",
    creating: "Creating...",
    no_credits_available: "No credits available. Please buy a package first.",
    available_credits: "Available Credits",
    credits_granted: "Credits Granted",
    packages_purchased: "Packages Purchased",
    no_employees_yet: "No employees created yet",
    retry: "Retry",
    role: "Role",
    approved: "Approved",
    rejected: "Rejected",
    pending: "Pending",
    amount: "Amount",
    no_purchase_history: "No purchase history found",
    advertisement: "Advertisement",
    coming_soon: "Coming soon",
    membership_renewal: "Membership Renewal",
    usdt_payment: "USDT Payment",
    copy_wallet_address: "Copy Wallet Address",
    payment_success:
      "Payment successful! Thank you. Your membership will be updated shortly.",
    payment_notify_failed:
      "Payment succeeded, but failed to notify server. Please contact support if your membership is not updated.",
    payment_cancelled: "Payment was cancelled.",
    payment_failed: "Payment failed. Please try again.",
    wallet_address_copied: "Wallet address copied to clipboard",
    wallet_copy_failed: "Failed to copy address. Please copy manually.",
    pay_with_usdt: "Pay with USDT",
    no_payment_history: "No payment history found.",
    membership_tenure: "Membership Tenure",
    usdt_label: "USDT",
    telegram_coin: "Telegram Coin",
    loading_history: "Loading history...",
    premium_expiring: "Your Premium Membership is expiring on :",
    upgrade_to_premium: "Upgrade to Premium for more features!",
    date_label: "Date:",
    amount_label: "Amount:",
    status_label: "Status:",
    period_label: "Period:",
    transaction_id_label: "Transaction ID",
    transaction_id_placeholder: "Enter your transaction ID",
    submit_payment: "Submit Payment",
    submitting: "Submitting...",
    no_membership_renewal_history: "No membership renewal history found.",
    years_label: "years",
    pay_with_telegram_coin: "Pay with TG Coin",
    processing: "Processing...",
    background_images: "Background Images",
    system_images: "System Images",
    your_images: "Your Images",
    no_system_images: "No system images",
    no_user_images: "No user images",
    categories: "Categories",
    no_categories: "No categories",
    work_in_progress: "Work in progress",
    failed_load_background: "Failed to load background images or categories",
    theme_updated_success: "Theme updated successfully!",
    failed_to_update_theme: "Failed to update theme",
    theme_settings: "Theme Settings",
    font_color: "Font Color",
    theme_color: "Theme Color",
    save: "Save",
    saving: "Saving...",
    wallet_address_label: "Wallet Address",
    upgrade_to_upload: "Upgrade to upload",
    download_qr: "Download QR Code",
  },
  zh: {
    membership: "會員",
    background: "背景",
    theme: "主題",
    language: "語言",
    logout: "登出",
    english: "英語",
    chinese: "繁體中文",
    cancel: "取消",
    save_language: "儲存語言",
    add_new_folder: "新增資料夾",
    folder_name: "資料夾名稱",
    submit: "送出",
    edit_folder: "編輯資料夾",
    update: "更新",
    delete: "刪除",
    no_contacts: "沒有聯絡人",
    search_placeholder: "以姓名或公司搜尋",
    add_more_folders: "+ 新增資料夾",
    update_profile: "更新您的個人資料",
    loading: "載入中...",
    copy_qr: "複製二維碼",
    scan_qr: "掃描我的二維碼",
    copy_details: "複製我的資料",
    company_update_title: "更新公司資料",
    company_create_title: "建立公司資料",
    placeholder_company_english: "公司英文名稱",
    placeholder_company_chinese: "公司中文名稱",
    placeholder_designation: "職稱",
    please_upload:
      "請上傳\n640 寬 x 360 高 的圖片\n或\n尊貴會員可上傳 1 分鐘影片",
    browse: "選擇檔案",
    updating: "更新中...",
    add_more: "新增更多",
    no_description: "沒有可用的描述",
    next_company: "下一間公司",
    placeholder_display_order: "設定顯示順序",
    update_chamber: "更新商會",
    enter_chamber_detail: "輸入您的商會詳情",
    chamber_details: "商會詳情",
    placeholder_chamber_english: "商會英文名稱",
    placeholder_chamber_chinese: "商會中文名稱",
    no_chamber_data: "找不到商會資料。",
    add_chamber: "新增商會",
    website_for_chamber: "商會網站",
    telegram_placeholder: "https://t.me/Telegram Id",
    upgrade_membership: "升級您的會員資格",
    your_membership: "您的會員資格",
    renewed_by_partner: "您的會員資格由我們的合作夥伴續訂，合作夥伴代碼：",
    premium_membership: "尊貴會員",
    basic_membership: "基本會員",
    renew_membership: "續訂會員資格",
    premium_expiring: "您的尊貴會員資格將到期於：",
    upgrade_to_premium: "升級為尊貴會員以獲得更多功能！",
    payment_history: "付款記錄",
    donator_section: "捐助者專區",
    donator_dashboard: "捐助者儀表板",
    dashboard: "儀表板",
    buy_credits: "購買積分",
    create_employee: "創建員工",
    my_employees: "我的員工",
    purchase_history: "購買記錄",
    employee_credits: "員工積分",
    operator_credits: "操作員積分",
    operator_slots: "操作員名額",
    available: "可用",
    credits_used: "已使用積分",
    total_employees: "員工總數",
    no_packages_available: "暫無套餐",
    popular: "熱門",
    buy_now: "立即購買",
    buy_package: "購買套餐",
    package_details: "套餐詳情",
    transaction_id_help: "請輸入您的鏈下 USDT 交易編號",
    telegram_id: "Telegram ID",
    employee_name: "員工姓名",
    optional: "選填",
    creating: "創建中...",
    no_credits_available: "沒有可用積分。請先購買套餐。",
    available_credits: "可用積分",
    credits_granted: "授予積分",
    packages_purchased: "已購買套餐",
    no_employees_yet: "尚未創建員工",
    retry: "重試",
    role: "角色",
    approved: "已批准",
    rejected: "已拒絕",
    pending: "待處理",
    amount: "金額",
    no_purchase_history: "找不到購買記錄",
    advertisement: "廣告",
    coming_soon: "即將推出",
    membership_renewal: "會員續訂",
    usdt_payment: "USDT 付款",
    copy_wallet_address: "複製錢包地址",
    payment_success: "付款成功！謝謝您。您的會員資格將很快更新。",
    payment_notify_failed:
      "付款成功，但通知伺服器失敗。如果您的會員資格未更新，請聯繫客服。",
    payment_cancelled: "付款已取消。",
    payment_failed: "付款失敗。請再試一次。",
    wallet_address_copied: "錢包地址已複製到剪貼簿",
    wallet_copy_failed: "複製地址失敗。請手動複製。",
    pay_with_usdt: "使用 USDT 付款",
    no_payment_history: "找不到付款記錄。",
    membership_tenure: "會員期限",
    usdt_label: "USDT",
    telegram_coin: "TG 幣",
    loading_history: "載入記錄中...",
    date_label: "日期：",
    amount_label: "金額：",
    status_label: "狀態：",
    period_label: "期間：",
    transaction_id_label: "交易編號",
    transaction_id_placeholder: "輸入您的交易編號",
    submit_payment: "提交付款",
    submitting: "提交中...",
    no_membership_renewal_history: "找不到會籍續費記錄。",
    years_label: "年",
    pay_with_telegram_coin: "使用 TG 幣付款",
    processing: "處理中...",
    background_images: "背景圖片",
    system_images: "系統圖片",
    your_images: "您的圖片",
    no_system_images: "沒有系統圖片",
    no_user_images: "沒有使用者圖片",
    categories: "分類",
    no_categories: "沒有分類",
    theme_settings: "主題設定",
    font_color: "字體顏色",
    theme_color: "主題顏色",
    save: "儲存",
    saving: "儲存中...",
    wallet_address_label: "錢包地址",
    upgrade_to_upload: "升級以上傳",
    download_qr: "下載二維碼",
  },
};

export function getLanguage(): Lang {
  try {
    const v = localStorage.getItem(STORAGE_KEY);
    if (!v) return defaultLang;
    return v === "zh" ? "zh" : "en";
  } catch {
    return defaultLang;
  }
}

export function setLanguage(lang: Lang) {
  try {
    localStorage.setItem(STORAGE_KEY, lang);
    // notify listeners
    window.dispatchEvent(
      new CustomEvent("language-changed", { detail: { lang } }),
    );
  } catch {}
}

export function t(key: string, lang?: Lang) {
  const use = lang || getLanguage();
  return translations[use][key] ?? key;
}

export default { getLanguage, setLanguage, t };
